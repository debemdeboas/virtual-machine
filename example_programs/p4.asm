; FOR A GIVEN `N`, BUBBLE SORT AN ARRAY[N]
LDI R0, 50
STD [298], R0 ; STORE ARRAY SIZE

; LOAD ARRAY INTO MEMORY
LDI R1, 9 ; JUMP BACK TO MAIN PROGRAM AFTER LOADING ARRAY
JMP 46 ; LOAD ARRAY

; MAIN PROGRAM
LDI R6, 41
; OUTER LOOP
LDI R0, 0 ; SWAPPED = FALSE
LDI R1, 300 ; ARRAY START
LDI R5, 0 ; LOOP COUNTER

    ; LOOP START
    LDX R2, [R1]
    ADDI R1, 1
    LDX R3, [R1]
    LDI R4, 0
    ADD R4, R2 ; R4 = R2
    SUB R4, R3 ; R4>0 = SWAP
    LDI R7, 33 ; JUMP TO SIZE CHECK
    JMPIL R7, R4
    JMPIE R7, R4

    LDI R0, 1 ; SWAPPED = TRUE
    SWAP R2, R3
    STX [R1], R3
    SUBI R1, 1
    STX [R1], R2
    ADDI R1, 1

    LDD R4, [298] ; GET ARRAY SIZE
    SUBI R4, 2
    SUB R4, R5
    ADDI R5, 1
    JMPIE R6, R4 ; IF R4=0, END INNER LOOP
    JMP 16 ; ELSE CONTINUE

; CHECK IF SWAPPED = TRUE (R0 > 0)
LDI R6, 9
JMPIG R6, R0
STOP

; LOAD RANDOMIZED ARRAY INTO MEMORY
LDI R0, 73
STD [300], R0
LDI R0, 29
STD [301], R0
LDI R0, 8
STD [302], R0
LDI R0, 82
STD [303], R0
LDI R0, 199
STD [304], R0
LDI R0, 62
STD [305], R0
LDI R0, 164
STD [306], R0
LDI R0, 182
STD [307], R0
LDI R0, 29
STD [308], R0
LDI R0, 197
STD [309], R0
LDI R0, 38
STD [310], R0
LDI R0, 2
STD [311], R0
LDI R0, 186
STD [312], R0
LDI R0, 192
STD [313], R0
LDI R0, 35
STD [314], R0
LDI R0, 18
STD [315], R0
LDI R0, 122
STD [316], R0
LDI R0, 138
STD [317], R0
LDI R0, 181
STD [318], R0
LDI R0, 195
STD [319], R0
LDI R0, 86
STD [320], R0
LDI R0, 174
STD [321], R0
LDI R0, 75
STD [322], R0
LDI R0, 135
STD [323], R0
LDI R0, 7
STD [324], R0
LDI R0, 12
STD [325], R0
LDI R0, 33
STD [326], R0
LDI R0, 67
STD [327], R0
LDI R0, 62
STD [328], R0
LDI R0, 133
STD [329], R0
LDI R0, 55
STD [330], R0
LDI R0, 104
STD [331], R0
LDI R0, 78
STD [332], R0
LDI R0, 84
STD [333], R0
LDI R0, 91
STD [334], R0
LDI R0, 121
STD [335], R0
LDI R0, 73
STD [336], R0
LDI R0, 178
STD [337], R0
LDI R0, 117
STD [338], R0
LDI R0, 109
STD [339], R0
LDI R0, 4
STD [340], R0
LDI R0, 163
STD [341], R0
LDI R0, 11
STD [342], R0
LDI R0, 182
STD [343], R0
LDI R0, 54
STD [344], R0
LDI R0, 77
STD [345], R0
LDI R0, 107
STD [346], R0
LDI R0, 197
STD [347], R0
LDI R0, 81
STD [348], R0
LDI R0, 100
STD [349], R0
JMPI R1